{% extends "admin/base_site.html" %}
{% load render_table from django_tables2 %}
{% block bootstrap %}
<script>
    $('.collapse').collapse()
</script>
{% endblock %}
{%block content%}
{% block body %}
{% load ngsdbview_extras %}
{% load humanize %}
{%  if charts  %}
    <TABLE>
        {% for chromosome in charts %}
            <TR><TD>
                <div class="panel-heading" style="background-color: #F6E3CE; border-color:#F6E3CE; overflow: hidden">
                     <a class="collapse" data-toggle="collapse" data-parent="#accordion" href="#CNVsection_{{ chromosome }}" aria-expanded="true"> <h3 class="panel-title" style="text-align: left">{{ forloop.counter }}. Chromosome : {{ chromosome }}</h3> </a>
                </div>
                <div class="collapse in"id="CNVsection_{{ chromosome }}"> <!-- Orgspecific section collapsible content -->
                    <TABLE>
                        {% for section in charts|hash:chromosome %}
                        <TR>
                            <img src="{{ charts|hash:chromosome|hash:section }}">
                        </TR>
                        {% endfor %}
                    </TABLE>
                </div>
            </TD></TR>
        {% endfor %}
    </TABLE
{% else %}

<FORM action="/snpdb/comparelibs/cnv/{{ exp.id }}/" method="post">
{% csrf_token %}
    <TABLE>
        <TR><TH>Sl. No.</TH><TH>Select</TH><TH>Library Code</TH><TH>Library Name</TH><TH>Color For the Bar</TH></TR>
        {% for lib in libs %}
            <TR><TD>{{ forloop.counter }}</TD><TD><input type="checkbox" name="libcodes" value="{{ lib.library_code }}"></TD><TD>{{ lib.library_code }}</TD><TD>{{ lib.sampleid.samplename }}</TD>
            {# display dropdown for color #}
            <TD>
                <select name="{{ lib.library_code }}">
                {% for color in colors %}
                    <option value={{ color }}>{{ color }}</option>
                {% endfor %}
                </select>
            </TD>
            <TD>
                <select name="linetype_{{ lib.library_code}}">
                    {% for style in linestyles %}
                        <option value={{ style }} >{{ style }}</option>
                    {% endfor %}
                </select>
            </TD>
            </TR>
        {% endfor %}
        <TR><TD></TD></TR>
    </TABLE>
    <TABLE><TR><TD>
        Number of datapoints to plot in a horizontal picture: <input type="text" name="windowsize" value="{{windowsize}}">
        </TD></TR><TR><TD>
        More points (value), the messier the picture will be. 100 is optimal.
        Very few points will result in many pictures.

    </TD></TR></TABLE>
<input type="submit"  name="libraryselection" value="Display CNV" />
</FORM>
{% endif %}
{% endblock %}
{% endblock %}